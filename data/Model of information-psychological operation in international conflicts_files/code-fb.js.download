var _tmr=_tmr||[];
(function(){function v(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function B(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function ca(a){for(var b="",c,d=0;d<a;d++)c=16*Math.random()|0,b+=c.toString(16);return b}function q(){return(new Date).getTime()}function za(){var a="tmr"+(""+Math.random()).slice(2);try{return H.setItem(a,a),H.removeItem(a),!0}catch(b){return!1}}function T(a){try{return H.getItem(da+"_"+
a)}catch(b){}return null}function C(a,b){try{H.setItem(da+"_"+a,b)}catch(c){}}function ea(a){g(k(a,!0,!1,!1)+";e="+escape("detect"))}function f(){}function I(a){a&&"object"===typeof a&&(!s&&"id"in a)&&(s=a.id)}function U(a){return a||"https:"==document.location.protocol||"chrome-extension:"==document.location.protocol?"https:":"http:"}function Aa(a){return(a=!D?void 0:D[a])&&V?a-V:void 0}function g(a){fa({url:a})}function fa(a,b){var c=U(w)+"//top-fwz1.mail.ru"+a.url;a.transport=new Image;a.ts=q();
b?c=ga(a):!w&&!E&&(a.timeout=window.setTimeout(function(){W(a)},1E4),a.transport.onload=function(){X(a)},a.transport.onerror=function(){W(a)});a.transport.src=c}function J(a,b,c){if(!(b&&"object"===typeof b))return l&&console.warn("[TopMailRu]: Invalid event of "+a),null;var d={name:a,title:c.title||null};"id"in c&&!1!==c.id&&(d.id="id"in b&&b.id,!0!==c.id&&(d.id=d.id||c.id));if(l){var e=ha(b,{params:c.required,fn:c.fn});if(e.missed.length)return console.warn("[TopMailRu]"+(d.id?"["+d.id+"]":"")+
": Unspecified "+(1<e.missed.length&&e.missed.slice(0,-1).join(", ")+" and "||"")+e.missed.slice(-1)+" in "+a),null;var ia=ha(b,{params:c.optional,fn:c.fn}),f=[].concat(e.values).concat(ia.values),e=[].concat(e.missed).concat(ia.missed);c.value&&(b="value"in b&&b.value,!0!==c.value&&(b=b||c.value),b?f.push("value: "+b):e.push("value"));d.value=f.length?"{ "+f.join(", ")+" }":"";d.empty=e.length?"("+(1<e.length?e.slice(0,-1).join(", ")+" and "+e.slice(-1)+" are":e.slice(-1)+" is")+" empty)":""}return"id"in
c&&!1!==c.id&&!d.id?(l&&console.warn("[TopMailRu]: Undefined counter ID of "+a+" "+d.value),null):d}function ha(a,b){var c=[],d=[],e,f;if(b.params)for(e in b.params)b.params.hasOwnProperty(e)&&!1!==b.params[e]&&(f=e in a&&a[e],!0!==b.params[e]&&(f=f||b.params[e]),f?c.push(e+': "'+(b.fn?b.fn.call(self,e,f):f)+'"'):d&&d.push(e));return{values:c,missed:d}}function K(a){console.info("[TopMailRu]["+a.id+"]: "+(a.title||a.name)+" "+a.value+" "+a.empty)}function k(a,b,c,d){t&&C(L,++r);var e="id"in a?a.id:
s,f="url"in a?a.url:location.href,h="referrer"in a?a.referrer:document.referrer,l="title"in a?a.title:document.title,g;g=Y;null===g&&(g=Ba());g=null!==g?g?1:0:null;var m="userid"in a?a.userid:y||0===y?y:void 0,k;k=[];s&&e!==s&&k.push("sec");k=k.join(",");var n;b=(b?"/tracker":"/counter")+"?js=13"+(e?";id="+escape(e):"")+(f?";u="+escape(f):"")+(h?";r="+escape(h):"")+("start"in a&&0<a.start?";st="+escape(a.start):"")+("gender"in a?";gender="+escape(a.gender):"")+("age"in a?";age="+escape(a.age):"")+
("pid"in a?";pid="+escape(a.pid):"")+(void 0!==m?";userid="+escape(m):"")+(d&&l?";title="+encodeURIComponent(l):"")+((n=window.screen)?";s="+n.width+"*"+n.height:"")+";vp=";d=n=0;document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(n=document.documentElement.clientWidth,d=document.documentElement.clientHeight):"number"==typeof window.innerWidth&&(n=window.innerWidth,d=window.innerHeight);n=b+(""+n+"*"+d)+";touch="+Ca+";hds="+Da+";flash="+Z+";sid="+
ja+";ver="+ka;if(c){if(!D||!$)c="";else{c=[];c.push($.type);c.push($.redirectCount);c.push(V);for(b=0;b<la.length;b++)c.push(Aa(la[b]));c=c.join("/")}c=";nt="+c}else c="";c=n+c+("device"in a?";device="+escape(a.device):"");var p;if("params"in a){n=escape;if(a=a.params)if(b=typeof a,"number"===b||"boolean"===b||"string"===b||a.nodeType||a===a.window)p="";else{d=[];for(p in a)if(a.hasOwnProperty(p)){e=a[p];b=typeof e;if("string"===b)e='"'+e.replace(/[\"\']/g,"\\$&")+'"';else if(!("number"===b||"boolean"===
b))continue;d.push('"'+p+'":'+e)}p=!d.length?"":"{"+d.join(",")+"}"}else p="";p=";params="+n(p)}else p="";return c+p+(null!==g?";detect="+g:"")+(t?";lvid="+escape(t?""+M+":"+q()+":"+r+":"+N:""):"")+(k?";opts="+escape(k):"")+";_="+Math.random()}function ma(a,b){return"/tracker?js=13;id="+a[0]+";e="+escape(b)+";sid="+ja+";ids="+a.join()+";ver="+ka+";_="+Math.random()}function na(a){for(var b=0;b<u.length;b++)g(k(u[b],!0,!1,!0)+";e="+escape("PVT/"+a))}function Ea(){Y=!0;oa(1);if(!pa&&!F){F=!0;for(var a=
0;a<u.length;a++)ea(u[a])}}function Fa(){oa(0);Y=!1}function Ba(){var a;a=(a=qa.cookie.match(RegExp("(?:^|; )"+ra.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):null;if(null===a)return null;a=a.split("|");if(2!==a.length)return null;var b=a[1],b=q()-b;if(0>b||b>sa)return null;a=parseInt(a[0],10);return isNaN(a)?null:a}function oa(a){var b=q(),b=[a,b].join("|"),c=ra;a={path:"/",expires:sa};var d=a.expires;"number"===typeof a.expires&&(d=new Date,d.setTime(d.getTime()+
a.expires));d&&d.toUTCString&&(d=d.toUTCString());a.expires=d;var b=c+"="+encodeURIComponent(b),e;for(e in a)b+="; "+e,c=a[e],!0!==c&&(b+="="+c);qa.cookie=b}function O(){document.addEventListener?(B(document,"DOMContentLoaded",O),_tmr.onready()):document.attachEvent&&"complete"===document.readyState&&(B(document,"readystatechange",O),_tmr.onready())}function ta(){B(window,"load",ta);_tmr.onready();_tmr.onload()}function P(){B(window,"unload",P);B(window,"beforeunload",P);_tmr.unload()}if("[object Array]"===
Object.prototype.toString.call(_tmr)){var m=window,h=navigator,qa=document,H=window.localStorage||null,da="tmr",t=za(),F=!1,Y=null,sa=864E5,ra="tmr_detect",Ga=function(){function a(a,c){var d=document.createElement("div");d.setAttribute("class",String.fromCharCode(97,100,118,98,108,111,99,107,32,97,100,118,101,114,116,98,108,111,99,107,32,97,109,109,98,108,111,99,107,32,98,45,98,97,110,110,101,114,32,98,45,109,101,100,105,97,45,98,97,110,110,101,114,32,112,117,98,95,51,48,48,120,50,53,48,32,112,117,
98,95,51,48,48,120,50,53,48,109,32,109,101,100,105,117,109,95,114,101,99,116,97,110,103,108,101,95,51,48,48,95,50,53,48,32,112,117,98,95,55,50,56,120,57,48,32,108,101,97,100,101,114,98,111,97,114,100,95,55,50,56,95,57,48,32,119,105,100,101,95,115,107,121,115,99,114,97,112,101,114,95,49,54,48,95,54,48,48,32,119,105,100,101,95,115,107,121,115,99,114,97,112,101,114,95,49,54,48,120,54,48,48,32,116,101,120,116,45,97,100,32,116,101,120,116,65,100,32,116,101,120,116,95,97,100,32,116,101,120,116,95,97,100,
115,32,116,101,120,116,45,97,100,115,32,116,101,120,116,45,97,100,45,108,105,110,107,115,32,97,100,95,116,101,120,116,32,97,100,95,116,101,120,116,32,98,97,110,110,101,114,95,116,101,120,116,32,116,101,120,116,45,98,97,110,110,101,114,32,98,45,114,98));d.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;");this.bait=document.body.appendChild(d);this.bait.offsetParent;this.bait.offsetHeight;this.bait.offsetLeft;
this.bait.offsetTop;this.bait.offsetWidth;this.bait.clientHeight;this.bait.clientWidth;this.loopNumber=0;this.fnPositive=a||null;this.fnNegative=c||null;var e=this;setTimeout(function(){e._checkBait.call(e)},1)}a.prototype._checkBait=function(){if(F)this._stop();else{var a=!1;null!==document.body.getAttribute("abp")||null===this.bait.offsetParent||0==this.bait.offsetHeight||0==this.bait.offsetLeft||0==this.bait.offsetTop||0==this.bait.offsetWidth||0==this.bait.clientHeight||0==this.bait.clientWidth?
a=!0:void 0!==window.getComputedStyle&&(a=window.getComputedStyle(this.bait,null),a="none"==a.getPropertyValue("display")||"hidden"==a.getPropertyValue("visibility"));(!0===a||10<=++this.loopNumber)&&this._stop();if(a&&this.fnPositive)try{this.fnPositive()}catch(c){}else if(!a&&10>this.loopNumber){var d=this;setTimeout(function(){d._checkBait.call(d)},50*this.loopNumber)}else try{this.fnNegative()}catch(e){}}};a.prototype._stop=function(){try{document.body.removeChild(this.bait)}catch(a){}};return function(b,
c){new a(b,c)}}(),ka=60,Q=[],aa=0,R=0,ja=ca(16),y=null,S=0,L="reqNum",r=t&&T(L);null===r?(r=0,t&&C(L,r)):r=parseInt(r,10);var N=t&&T("lvid"),M=t&&T("lvidTS");if(null===N||null===M)N=ca(32),M=""+q(),r=0,t&&(C("lvid",N),C("lvidTS",M),C(L,r));var s=0,u=[],x=[],ba=[],E="string"===typeof location.hostname&&(-1!=location.hostname.search(/^odnoklassniki\.ru$/)||-1!=location.hostname.search(/\.odnoklassniki\.ru$/)||-1!=location.hostname.search(/^ok\.ru$/)||-1!=location.hostname.search(/\.ok\.ru$/)),w="string"===
typeof location.hostname&&(-1!=location.hostname.search(/^vk\.com$/)||-1!=location.hostname.search(/\.vk\.com$/)),G="string"===typeof location.hostname&&(-1!=location.hostname.search(/^lamoda\.ru$/)||-1!=location.hostname.search(/\.lamoda\.ru$/)),z="string"===typeof location.search&&-1!=location.search.search(/[?&]rb_clickid=/),l="string"===typeof location.search&&-1!=location.search.search(/[?&]tmr_debug=1(?:&|$)/),ua=E||w||G,Ha=!z,Ia=E||w,Ja=E||w,va=E||w,pa=!1,Ca="ontouchstart"in m||1<(h.maxTouchPoints||
h.msMaxTouchPoints)?"1":"0",Da=window.devicePixelRatio||0,Z="";if(h.plugins&&h.plugins["Shockwave Flash"])Z=h.plugins["Shockwave Flash"].description.split(" ")[2];else if(window.ActiveXObject)try{var A=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),A=A.GetVariable("$version"),A=A.split(" ")[1].split(","),Z=A[0]+"."+A[1]}catch(Ka){}var m=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{},D=m.timing||{},$=m.navigation||{},la="unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),
V=!D?void 0:D.navigationStart,ga,X,W;ga=function(a){return U(w)+"//"+("mytopf.com"===!0?"top-fwz1.mail.ru":"mytopf.com")+a.url};X=function(a){a.transport.onload=null;a.transport.onerror=null;window.clearTimeout(a.timeout)};W=function(a){var b=q()-a.ts;X(a);a.url+=";qt="+b;fa(a,!0)};f.prototype.pageView=function(a){I(a);var b;if(b=a&&"object"===typeof a)if(b="id"in a)if(b=5>x.length){b:{for(b=0;b<x.length;b++)if(x[b]===a.id){b=!0;break b}b=!1}b=!b}b&&(x.push(a.id),!1!==a.beat&&ba.push(a.id),u.push(a),
F&&ea(a));if(b=J("pageView",a,{title:"Page view",id:!0,optional:{url:location.href}}))"start"in a&&Q.push(a),g(k(a,!1,!1,!0)),R=q(),l&&K(b)};f.prototype.reachGoal=function(a){I(a);var b=J("reachGoal",a,{title:"Reach goal",id:s,value:!0,required:{goal:!0},optional:null,fn:null});if(b&&"goal"in a&&a.goal){var c="";"value"in a&&a.value&&(c=parseInt(a.value)||"");g(k(a,!0,!1,!0)+(";e="+escape("RG:"+c+"/"+a.goal)));l&&K(b)}};f.prototype.itemView=function(a){var b=J("itemView",a,{title:"Item view",id:s,
optional:{list:!0,productid:!0,pagetype:!0,totalvalue:!0},fn:function(a,b){return(""+b).replace(/;/g," ")}});if(b){var c=a.list||"",d=a.productid||"",e=a.pagetype||"",f=a.totalvalue||0;(new Image).src=U(0)+"//ad.mail.ru/retarget/?counter="+b.id+"&list="+c+"&productid="+d+"&pagetype="+e+"&totalvalue="+f+"&_="+Math.random();c="IV:"+f+"/"+(""+c).replace(/;/g," ")+";"+(""+d).replace(/;/g," ")+";"+(""+e).replace(/;/g," ");g(k(a,!0,!1,!1)+(";e="+escape(c)));l&&K(b)}};f.prototype.sendEvent=function(a){I(a);
var b=J("sendEvent",a,{title:"Send event",id:s,value:!0,required:{category:!0,action:!0},optional:{label:!0},fn:function(a,b){return(""+b).substr(0,300).replace(/;/g," ")}});if(b&&"category"in a&&a.category&&"action"in a&&a.action){var c=(""+a.category).substr(0,300),d=(""+a.action).substr(0,300),e="";"label"in a&&a.label&&(e=(""+a.label).substr(0,300));var f="";"value"in a&&a.value&&(f=parseInt(a.value)||"");c="CE:"+f+"/"+(""+c).replace(/;/g," ")+";"+(""+d).replace(/;/g," ")+";"+(""+e).replace(/;/g,
" ");g(k(a,!0,!1,!1)+(";e="+escape(c)));l&&K(b)}};f.prototype.setUserID=function(a){if(null===a||!1===a||void 0===a)this.deleteUserID();else{var b=typeof a;"number"!==b&&"string"!==b?l&&console.warn("[TopMailRu]: Invalid user ID in setUserID"):(y=a,l&&console.info("[TopMailRu]: Global user ID = "+y))}};f.prototype.deleteUserID=function(){y=null;l&&console.info("[TopMailRu]: Reset global user ID to null")};f.prototype.processEvent=function(a){if(a&&"object"===typeof a)if("type"in a)switch(a.type){case "pageView":this.pageView(a);
break;case "reachGoal":this.reachGoal(a);break;case "itemView":this.itemView(a);break;case "sendEvent":this.sendEvent(a);break;case "setUserID":"userid"in a&&this.setUserID(a.userid);break;case "deleteUserID":this.deleteUserID()}else l&&console.warn("[TopMailRu]: Unspecified push event type");else l&&console.warn("[TopMailRu]: Invalid push event")};f.prototype.push=function(a){for(var b=0,c=arguments.length;b<c;b++)this.processEvent(arguments[b])};var wa=!1;f.prototype.onready=function(){wa||(wa=
!0,!pa&&!F&&Ga(Ea,Fa))};var xa=!1;f.prototype.onload=function(){if(!xa){xa=!0;if(!Ja&&0<Q.length){S=q();for(var a=0,b;b=Q[a];a++)g(k(b,!0,!0,!1)+";e="+escape("RT/load")+";et="+S);R=S;Q=[]}Ha||setTimeout(function(){na(2)},2E3);Ia||setTimeout(function(){na(15)},15E3)}};f.prototype.beat=function(){if(!ua&&0!=ba.length&&aa){var a=q(),b=a-aa;if(!(12E4<b)){if(12E4<a-R)for(var c=0;c<u.length;c++)!1!==u[c].beat&&g(k(u[c],!0,!1,!0)+";e="+escape("RT/resend")+";et="+S+";active="+(b?"1":"0"));else g(ma(ba,"RT/beat"));
R=a}}};var ya=!1;f.prototype.unload=function(){ya||(ya=!0,!va&&0<x.length&&g(ma(x,"RT/unload")))};f.prototype.activity=function(a){aa=q()};m=new f;h=0;for(G=_tmr.length;h<G;h++)(z=_tmr[h])&&"object"===typeof z&&I(z);h=0;for(G=_tmr.length;h<G;h++)z=_tmr[h],m.processEvent(z);_tmr=m;if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)_tmr.onready();else document.addEventListener?v(document,"DOMContentLoaded",O):document.attachEvent&&v(document,"readystatechange",
O);if("complete"===document.readyState)_tmr.onload();else v(window,"load",ta);va||(v(window,"unload",P),v(window,"beforeunload",P));if(!ua&&0<x.length){setInterval(_tmr.beat,3E4);try{m=function(a){function b(a){v(document,a,function(){_tmr.activity(a)})}for(var c=0;c<a.length;c++)b(a[c])},m(["scroll","gesturechange","touchmove"]),m(["mousedown","mousemove","mouseup","touch"]),v(window,"scroll",function(){_tmr.activity("scallback")})}catch(La){}}}})();
